{{define "content"}}
<div class="container">
    <h2>{{.Product.Name}}</h2>
    <img src="{{.Product.ImageURL}}" class="img-fluid product-image" alt="{{.Product.Name}}">
    <p>Price: ${{.Product.Price}}</p>

    <h3>Reviews</h3>
    {{if .Reviews}}
        <ol>
            {{range .Reviews}}
                <li>
                    <strong>{{.User.Name}}</strong> (Rating: {{.Rating}}/5)
                    <p>{{.Review}}</p>
                </li>
            {{end}}
        </ol>
    {{else}}
        <p>No reviews yet.</p>
    {{end}}

    {{if .IsAuthenticated}}
        <h4>Leave a review</h4>
        <form method="POST" action="/add-review">
            <input type="hidden" name="product_id" value="{{.Product.ID}}">
            <div class="form-group">
                <label for="rating">Rating (1 to 5):</label>
                <input type="number" id="rating" name="rating" class="form-control" min="1" max="5" required>
            </div>
            <div class="form-group">
                <label for="review">Review:</label>
                <textarea id="review" name="review" class="form-control" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Submit Review</button>
        </form>
    {{else}}
        <p>Please <a href="/users/login">login</a> to leave a review.</p>
    {{end}}
</div>
{{end}}
